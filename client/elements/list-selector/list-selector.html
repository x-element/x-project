<link rel="import" href="../../components/polymer/polymer.html">
<polymer-element name="list-selector" attributes="list selected unselected multi">
	<template>
    <style>
      :host {
        display: none;
      }
    </style>

  </template>
  <script>
    Polymer('list-selector', {

      multi: true,

      listChanged: function () {
        this.unselected = this.list.slice();
        this.selected = this.multi ? [] : null;
      },

      select: function (item) {
        var index = this.unselected.indexOf(item);
        var is_unselected = index >= 0;
        if (is_unselected) {
          this.unselected.splice(index, 1);        
        }
        var is_selected;
        if (this.multi) {
          is_selected = this.selected.indexOf(item) >= 0;
          if (!is_selected) {
            this.selected.push(item);
          }
        } else {
          is_selected = this.selected === item;
          if (!is_selected) {
            this.selected = item;
          }
        }
      },

      unselect: function (item) {
        var index = this.selected.indexOf(item);
        var is_selected = index >= 0;
        if (is_selected) {
          this.selected.splice(index, 1);
        }
        var is_unselected = this.unselected.indexOf(item) >= 0;
        if (!is_unselected) {
          this.unselected.push(item);
        }
      }

    });
  </script>
</polymer-element>