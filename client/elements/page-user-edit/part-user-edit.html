<link rel="import" href="/components/polymer/polymer.html">   
<link rel="import" href="../app-link/app-link.html">
<link rel="import" href="../input-email/input-email.html">
<link rel="import" href="../input-password/input-password.html">
<dom-module id="part-user-edit" >
	<template>
    <style>
      :host {
        display: block;
      }
    </style>

    <iron-ajax id="ajax" method="POST" contentType="application/json" url="/api/Users" 
      on-core-response="{{on_response}}" on-core-error="{{on_error}}"></iron-ajax>

    <form id="form" role="form" on-submit="{{on_submit}}">
      <input-email id="input" label="email"></input-email>
      <input-password id="password" label="password"></input-password>
      <input type="submit" class="btn btn-success" value="Create" />
    </form>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'part-user-edit',

    on_submit: function (event) {
      event.preventDefault();
      var credentials = {};
      var input = this.$.input.value;
      var pw = this.$.password.value;
      credentials.email =  input;
      credentials.password = pw;
      var body = JSON.stringify(credentials);
      var ajax = this.$.ajax;
      console.log(body);
      ajax.body = body;
      ajax.go();
    },

    on_response: function (event) {
      var response = event.details.response;
      console.log(response);
    },

    on_error: function (event) {
      var response = event.details.response;
      console.error(response);
    }

  });
</script>