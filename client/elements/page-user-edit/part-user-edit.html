<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../../components/x-link/x-link.html">
<link rel="import" href="../x-email/x-email.html">
<link rel="import" href="../x-password/x-password.html">
<polymer-element name="part-user-edit" >
	<template>
    <style>
      :host {
        display: block;
      }
    </style>

    <core-ajax id="ajax" method="POST" contentType="application/json" url="/api/Users" 
      on-core-response="{{ on_response }}" on-core-error="{{ on_error }}"></core-ajax>

    <form id="form" role="form" on-submit="{{ on_submit }}">
      <x-email id="input" label="email"></x-email>
      <x-password id="password" label="password"></x-password>
      <input type="submit" class="btn btn-success" value="Create" />
    </form>

  </template>
  <script>
    Polymer('part-user-edit', {

      on_submit: function (event) {
        event.preventDefault();
        var credentials = {};
        var input = this.$.input.value;
        var pw = this.$.password.value;
        credentials.email =  input;
        credentials.password = pw;
        var body = JSON.stringify(credentials);
        var ajax = this.$.ajax;
        console.log(body);
        ajax.body = body;
        ajax.go();
      },

      on_response: function (event) {
        var response = event.details.response;
        console.log(response);
      },

      on_error: function (event) {
        var response = event.details.response;
        console.error(response);
      }

    });
  </script>
</polymer-element>