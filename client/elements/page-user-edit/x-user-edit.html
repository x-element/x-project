<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../../components/x-link/x-link.html">
<link rel="import" href="../x-email/x-email.html">
<link rel="import" href="../x-password/x-password.html">
<polymer-element name="x-user-edit" >
	<template>
    <style>
      :host {
        display: block;
      }
    </style>

    <core-ajax id="create" method="POST" contentType="application/json" url="/api/Users" on-core-complete="{{ on_create }}" ></core-ajax>
    <form id="form" on-submit="{{ on_submit }}">
      Email
      <x-email id="input"></x-email>
      Password
      <x-password id="password"></x-password>
      <input type="submit" on-click="{{ on_submit }}" value="Create" />
    </form>

  </template>
  <script>
    Polymer('x-user-edit', {

      on_submit: function (event) {
        event.preventDefault();
        var credentials = {};
        var input = this.$.input.value;
        var pw = this.$.password.value;
        credentials.email =  input;
        credentials.password = pw;
        var body = JSON.stringify(credentials);
        var create = this.$.create;
        console.log(body);
        create.body = body;
        create.go();
      },

      on_create: function(event, res) {
        alert("Elemento aggiunto o forse no");
      }

    });
  </script>
</polymer-element>