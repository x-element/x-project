<link rel="import" href="../../components/core-ajax/core-ajax.html">
<link rel="import" href="../../components/x-link/x-link.html">
<polymer-element name="part-collections-list">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <core-ajax id="ajax" url="/explorer/resources" handleAs="json" on-core-response="{{Â on_response }}"></core-ajax>
    
    <div>
      <template repeat="{{ endpoint in endpoints }}">
        <h4>
          <a is="x-link" href="/admin/collections{{ endpoint.path }}">{{ endpoint.path | clear }}</a>
        </h4>
      </template>
    </div>

  </template>
  <script>
    Polymer('part-collections-list', {

      ready: function () {
        this.$.ajax.go();
      },

      clear: function (path) {
        return path.substr(1);
      },

      on_response: function (event) {
        var endpoints = event.detail.response.apis;
        endpoints.shift();
        this.endpoints = endpoints;
      }

    });
  </script>
</polymer-element>