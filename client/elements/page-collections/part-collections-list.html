<link rel="import" href="../../components/core-ajax/core-ajax.html">
<link rel="import" href="../link-x/link-x.html">
<dom-module id="part-collections-list">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>

    <core-ajax id="ajax" url="/explorer/resources" handleAs="json" on-core-response="{{Â on_response }}"></core-ajax>
    
    <div>
      <template is="x-repeat" items="{{ endpoints }}">
        <h4>
          <a is="link-x" href="/admin/collections{{ item.path }}">{{ item.path | clear }}</a>
        </h4>
      </template>
    </div>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'part-collections-list',

    ready: function () {
      this.$.ajax.go();
    },

    clear: function (path) {
      return path.substr(1);
    },

    on_response: function (event) {
      var endpoints = event.detail.response.apis;
      endpoints.shift();
      this.endpoints = endpoints;
    }

  });
</script>