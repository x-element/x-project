<link rel="import" href="/components/polymer/polymer.html">   
<link rel="import" href="/components/iron-ajax/iron-ajax.html">
<link rel="import" href="../app-link/app-link.html">
<dom-module id="part-collections-list">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>

    <iron-ajax auto method="GET" handle-as="json" url="/explorer/resources"  
      last-response="{{response}}"></iron-ajax>
    
    <template is="dom-repeat" items="{{response.apis}}" filter="inject_url">
      <h4><a is="app-link" href="{{item.url}}">{{item.path}}</a></h4>
    </template>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'part-collections-list',

    properties: {
      response: {
        type: Object,
        value: function () { return { apis: [] }; },
        observer: 'on_response'
      }
    },

    on_response: function () {
      this.response.apis.shift();
    },

    inject_url: function (item) {
      item.url = '/admin/collections' + item.path;
      return item;
    }

  });
</script>