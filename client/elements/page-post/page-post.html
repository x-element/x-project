<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../part-header/part-header.html">
<link rel="import" href="../part-jumbotron/part-jumbotron.html">
<link rel="import" href="../part-footer/part-footer.html">
<link rel="import" href="part-post-author.html">
<link rel="import" href="part-post-content.html">
<link rel="import" href="part-post-date.html">
<dom-module id="page-post">
  <style>
    :host {
      display: block;
    }

    .page.container {
      margin-top: 0px;
    }
  </style>
  <template>

    <core-ajax auto id="get_post" url="/api/posts/{{ post_id }}" handleAs="json" 
      on-core-response="{{ on_get_post }}" on-core-error="{{ on_error_get_post }}"></core-ajax>

    <part-header></part-header>
    <x-jumbotron>
      <div class="container">
        <h1>{{ post.title }}</h1>
        <part-post-author post="{{ post }}"></part-post-author>
      </div>
    </x-jumbotron>
    <div class="page container">
      <part-post-date post="{{ post }}"></part-post-date>
      <part-post-content post="{{ post }}"></part-post-content>
      <a href="/posts">Back</a>
    </div>
    <part-footer></part-footer>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'page-post',

    on_get_post: function (event) {
      this.post = event.detail.response;
    },

    on_error_get_post: function (event) {
      console.log(event);
    }

  });
</script>