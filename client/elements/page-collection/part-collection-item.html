<link rel="import" href="../../components/core-ajax/core-ajax.html">
<polymer-element name="part-collection-item" attributes="item, schema">
	<template>
    <style>
      :host {
        display: block;
      }
    </style>

    <core-ajax id="ajax" method="DELETE" contentType="application/json" 
      url="/api{{ schema.resourcePath }}/{{ item.id }}"></core-ajax>

    <div>
      <ul class="list-unstyled">
        <template repeat="{{ property in schema.properties }}">
          <li>
            <strong class="key">{{ property.name }}</strong>
            <span class="value">{{ item[property.name] }}</span>
            <span class="required">{{ property.required ? 'required' : '' }}</span>
          </li>
        </template>
      </ul>
    </div>
    <div class="form-group">
      <a id="edit" class="btn btn-xs btn-warning" href="/admin/collections{{ schema.resourcePath }}/{{ item.id }}/edit">edit</a>
      <button id="delete" class="btn btn-xs btn-danger" on-click="{{ on_click_delete }}">delete</button>
    </div>

  </template>
  <script>
    Polymer('part-collection-item', {

      ready: function () {
        var name = Object.keys(this.schema.models);
        this.details = this.schema.models[name];
      },

      on_click_delete: function (event) {
        var test = confirm('Are you sure?');
        if (test == true) {
          this.delete_item();
        }
      },

      delete_item: function() {
        this.$.ajax.go();
      }

    });
  </script>
</polymer-element>