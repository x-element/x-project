<dom-module id="x-paginator">
  <style>
    :host {
      display: block;
      margin: 4px;
    }
  </style>
  <template>
    <div id="paginator">
      <template is="x-repeat" items="{{ pages }}">
        <button class="btn btn-xs btn-default" page="{{ index }}" 
            on-click="{{ on_click }}" disabled?="{{ index === current }}">
          {{ index+1 }}
        </button>
      </template>
    </div>
  </template>
</dom-module>
<script>
  Polymer({

    is: 'x-paginator',

    properties: {
      current: {
        type: Number,
        value: 0,
        observer: 'currentChanged'
      },
      count: {
        type: Number,
        value: 0,
        observer: 'countChanged'
      },
      perpage: {
        type: Number
      }
    },

    currentChanged: function () {
      this.fire('change-page', { 
        page: this.current,
        total: this.total,
        count: this.count,
        skip: this.current * this.perpage,
        limit: this.perpage
      });
    },

    countChanged: function () {
      this.total = Math.ceil(this.count / this.perpage);
      this.pages = Array.apply(null, Array(this.total));
    },

    on_click: function (event, detail, sender) {
      this.current = +sender.getAttribute('page');;
    }

  });
</script>