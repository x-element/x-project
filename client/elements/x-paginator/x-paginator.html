<link rel="import" href="../../components/polymer/polymer.html">
<polymer-element name="x-paginator" attributes="current perpage count">
	<template>
    <style>
      :host {
        display: block;
      }
    </style>

    <div id="paginator">
      <ul class="list-unstyled list-inline">
        <template repeat="{{ page, index in pages }}">
          <li>
            <button class="btn btn-xs btn-default" on-click="{{ on_click }}" page="{{ index }}" 
                disabled?="{{ index === current }}">
              {{ index+1 }}
            </button>
          </li>
        </template>
      </ul>
    </div>

  </template>
  <script>
    Polymer('x-paginator', {

      current: 0,

      count: 0,

      get limit () {
        return +this.perpage;
      },

      get skip () {
        return this.current * this.perpage;
      },

      countChanged: function () {
        this.total = Math.ceil(this.count / this.limit);
        this.pages = Array.apply(null, Array(this.total));
      },

      on_click: function (event, detail, sender) {
        this.current = +sender.getAttribute('page');;
        this.fire('change-page', { 
          page: this.current,
          total: this.total,
          count: this.count,
          skip: this.skip,
          limit: this.limit
        });
      }

    });
  </script>
</polymer-element>