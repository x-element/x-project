<link rel="import" href="/components/polymer/polymer.html">   
<dom-module id="filter-date">
  <style>
    :host {
      display: inline-block;
    }
  </style>
	<template>
    <form class="form-inline">
      <div class="form-group">
        <label>{{property.name}}</label>
        <select id="select">
          <option disabled></option>
          <option value="eq">on</option>
          <option value="lt">before</option>
          <option value="gt">after</option>
        </select>
        <button class="btn btn-xs btn-default" on-click="on_click_now">now</button>
        <input id="input" type="date" class="form-control input-sm" value="{{value}}">
      </div>
    </form>
  </template>
</dom-module>
<script>
  Polymer({

    is: 'filter-date',

    properties: {
      property: {
        type: Object
      },
      when: {
        type: String
      }
    },

    on_click_now: function (event) {
      event.preventDefault();
      var now = new Date();
      this.value = now.toISOString().split('T')[0];
    },

    get query () {
      var obj = {};
      obj[this.property.name] = {};
      obj[this.property.name][this.$.select.value] = this.value;
      return obj;
    }

  });
</script>