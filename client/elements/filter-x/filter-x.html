<link rel="import" href="/components/polymer/polymer.html">   
<link rel="import" href="../filter-date/filter-date.html">
<link rel="import" href="../filter-number/filter-number.html">
<link rel="import" href="../filter-select/filter-select.html">
<link rel="import" href="../filter-text/filter-text.html">
<dom-module id="filter-x">
  <style>
    :host {
      display: inline-block;
    }

    #container {
      display: inline-block;
    }
  </style>
  <template>
    <div id="container"></div>
  </template>
</dom-module>
<script>
  Polymer({

    is: 'filter-x',

    properties: {
      property: {
        type: Object,
        observer: 'on_property'
      }
    },

    types: {
      "string": "filter-text",
      "text": "filter-text",
      "location": "filter-text",
      "email": "filter-text",
      "date": "filter-date",
      "number": "filter-number",
      "enum": "filter-select"      
    },

    on_property: function () {
      var $type = this.property.$type;
      var type = this.types[$type];
      var element = document.createElement(type);
      var container = this.$.container;
      container.appendChild(element);
      element.property = this.property;
      this.filter = element;
    },

    get query () {
      return this.filter.query;
    }

  });
</script>