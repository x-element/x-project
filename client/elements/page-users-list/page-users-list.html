<link rel="import" href="../../components/polymer/polymer.html">
<polymer-element name="page-users-list" attributes="model">
  <template>

    <h2>Users list</h2>
    <core-ajax id="ajax" url="/api/Users?access_token={{ access_token }}" handleAs="json" on-core-response="{{Â on_response }}"></core-ajax>
    <ul>
      <template repeat="{{ user in users }}">
        <li>
          <span>{{ user.email }}</span>
        </li>
      </template>
    </ul>

  </template>
  <script>
    Polymer('page-users-list', {

      ready: function () {
        this.access_token = app.accessToken;
        this.$.ajax.go();
      },

      on_response: function(event, res) {
        var data = res.response;
        console.log(data);
        this.users = data;
      }

    });
  </script>
</polymer-element>