<link rel="import" href="../x-filter-date/x-filter-date.html">
<link rel="import" href="../x-filter-number/x-filter-number.html">
<link rel="import" href="../x-filter-select/x-filter-select.html">
<link rel="import" href="../x-filter-text/x-filter-text.html">
<polymer-element name="filter-x" attributes="property">
  <style>
    :host {
      display: inline-block;
    }

    #container {
      display: inline-block;
    }
  </style>
  <template>
    <div id="container"></div>
    <button class="btn btn-xs btn-default" on-click="on_click_remove">remove</button>
  </template>
</dom-module>
<script>
  Polymer({

    is: 'x-filter',

    types: {
      "string": "x-filter-text",
      "text": "x-filter-text",
      "location": "x-filter-text",
      "email": "x-filter-text",
      "date": "x-filter-date",
      "number": "x-filter-number",
      "enum": "x-filter-select"      
    },

    ready: function () {
      var $type = this.property.$type;
      var type = this.types[$type];
      var element = document.createElement(type);
      var container = this.$.container;
      container.appendChild(element);
      element.property = this.property;
      this.filter = element;
    },

    on_click_remove: function () {
      this.fire('remove-filter', this.property);
    },

    get query () {
      return this.filter.query;
    }

  });
</script>